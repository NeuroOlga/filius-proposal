<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
<title>Узнай характер своего ребёнка — Filius Magic</title>

<meta name="description" content="Психологический квиз для родителей: узнайте, какая игрушка станет настоящим другом для вашего ребёнка. Научный подход к выбору первого плюшевого компаньона." />
<meta property="og:title" content="Узнай характер своего ребёнка — Filius Magic" />
<meta property="og:description" content="Пройдите квиз вместе с ребёнком и узнайте, какая игрушка станет его верным другом!" />
<meta property="og:image" content="https://neuroolga.github.io/filius-proposal/Филиус%20.png" />
<meta property="og:type" content="website" />

<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Inter', sans-serif;
    background:
      radial-gradient(ellipse 60% 60% at 10% 10%, rgba(139,92,246,.3) 0%, transparent 50%),
      radial-gradient(ellipse 50% 50% at 90% 20%, rgba(251,191,36,.2) 0%, transparent 50%),
      radial-gradient(ellipse 60% 60% at 80% 70%, rgba(244,114,182,.25) 0%, transparent 50%),
      radial-gradient(ellipse 50% 50% at 20% 80%, rgba(167,139,250,.2) 0%, transparent 50%),
      linear-gradient(180deg, #0f0a1e 0%, #1a1035 40%, #12082a 100%);
    color: #fff;
    min-height: 100vh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }

  /* Magic stars container */
  .magic-bg {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }

  /* Twinkling stars */
  .star {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #fff;
    border-radius: 50%;
    animation: twinkle var(--duration) ease-in-out infinite;
    box-shadow: 0 0 6px 2px rgba(255,255,255,.5), 0 0 12px 4px var(--glow);
  }

  .star:nth-child(1)  { left: 5%;  top: 8%;  --duration: 3s; --glow: rgba(251,191,36,.6); animation-delay: 0s; }
  .star:nth-child(2)  { left: 15%; top: 15%; --duration: 4s; --glow: rgba(192,132,252,.6); animation-delay: 0.5s; }
  .star:nth-child(3)  { left: 25%; top: 5%;  --duration: 2.5s; --glow: rgba(244,114,182,.6); animation-delay: 1s; }
  .star:nth-child(4)  { left: 40%; top: 12%; --duration: 3.5s; --glow: rgba(167,139,250,.6); animation-delay: 0.3s; }
  .star:nth-child(5)  { left: 55%; top: 8%;  --duration: 4.5s; --glow: rgba(251,191,36,.6); animation-delay: 1.5s; }
  .star:nth-child(6)  { left: 70%; top: 18%; --duration: 3s; --glow: rgba(192,132,252,.6); animation-delay: 0.8s; }
  .star:nth-child(7)  { left: 85%; top: 10%; --duration: 3.8s; --glow: rgba(244,114,182,.6); animation-delay: 2s; }
  .star:nth-child(8)  { left: 92%; top: 25%; --duration: 2.8s; --glow: rgba(167,139,250,.6); animation-delay: 0.2s; }
  .star:nth-child(9)  { left: 8%;  top: 35%; --duration: 4.2s; --glow: rgba(251,191,36,.6); animation-delay: 1.2s; }
  .star:nth-child(10) { left: 20%; top: 45%; --duration: 3.2s; --glow: rgba(192,132,252,.6); animation-delay: 0.7s; }
  .star:nth-child(11) { left: 35%; top: 55%; --duration: 3.6s; --glow: rgba(244,114,182,.6); animation-delay: 1.8s; }
  .star:nth-child(12) { left: 50%; top: 40%; --duration: 4s; --glow: rgba(167,139,250,.6); animation-delay: 0.4s; }
  .star:nth-child(13) { left: 65%; top: 50%; --duration: 2.6s; --glow: rgba(251,191,36,.6); animation-delay: 1.4s; }
  .star:nth-child(14) { left: 78%; top: 38%; --duration: 3.4s; --glow: rgba(192,132,252,.6); animation-delay: 0.9s; }
  .star:nth-child(15) { left: 88%; top: 55%; --duration: 4.3s; --glow: rgba(244,114,182,.6); animation-delay: 2.2s; }
  .star:nth-child(16) { left: 12%; top: 70%; --duration: 3.1s; --glow: rgba(167,139,250,.6); animation-delay: 0.6s; }
  .star:nth-child(17) { left: 28%; top: 78%; --duration: 3.9s; --glow: rgba(251,191,36,.6); animation-delay: 1.6s; }
  .star:nth-child(18) { left: 45%; top: 85%; --duration: 2.7s; --glow: rgba(192,132,252,.6); animation-delay: 1.1s; }
  .star:nth-child(19) { left: 60%; top: 72%; --duration: 4.1s; --glow: rgba(244,114,182,.6); animation-delay: 0.1s; }
  .star:nth-child(20) { left: 75%; top: 82%; --duration: 3.3s; --glow: rgba(167,139,250,.6); animation-delay: 1.9s; }

  @keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
  }

  /* Floating sparkles */
  .sparkle {
    position: absolute;
    width: 8px;
    height: 8px;
    animation: float-sparkle var(--duration) ease-in-out infinite;
    opacity: 0;
  }

  .sparkle::before,
  .sparkle::after {
    content: '';
    position: absolute;
    background: var(--color);
    border-radius: 2px;
  }

  .sparkle::before {
    width: 100%;
    height: 2px;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
  }

  .sparkle::after {
    width: 2px;
    height: 100%;
    left: 50%;
    top: 0;
    transform: translateX(-50%);
  }

  .sparkle:nth-child(21) { left: 10%; top: 20%; --duration: 6s; --color: #fbbf24; animation-delay: 0s; }
  .sparkle:nth-child(22) { left: 30%; top: 30%; --duration: 7s; --color: #c084fc; animation-delay: 1s; }
  .sparkle:nth-child(23) { left: 50%; top: 25%; --duration: 5s; --color: #f472b6; animation-delay: 2s; }
  .sparkle:nth-child(24) { left: 70%; top: 35%; --duration: 8s; --color: #a78bfa; animation-delay: 0.5s; }
  .sparkle:nth-child(25) { left: 85%; top: 45%; --duration: 6.5s; --color: #fbbf24; animation-delay: 1.5s; }
  .sparkle:nth-child(26) { left: 20%; top: 60%; --duration: 7.5s; --color: #c084fc; animation-delay: 2.5s; }
  .sparkle:nth-child(27) { left: 40%; top: 70%; --duration: 5.5s; --color: #f472b6; animation-delay: 3s; }
  .sparkle:nth-child(28) { left: 60%; top: 65%; --duration: 6.8s; --color: #a78bfa; animation-delay: 0.8s; }
  .sparkle:nth-child(29) { left: 80%; top: 75%; --duration: 7.2s; --color: #fbbf24; animation-delay: 1.8s; }
  .sparkle:nth-child(30) { left: 15%; top: 85%; --duration: 5.8s; --color: #c084fc; animation-delay: 2.8s; }

  @keyframes float-sparkle {
    0%, 100% {
      opacity: 0;
      transform: translateY(0) rotate(0deg) scale(0.5);
    }
    20% {
      opacity: 0.8;
      transform: translateY(-20px) rotate(45deg) scale(1);
    }
    50% {
      opacity: 1;
      transform: translateY(-40px) rotate(90deg) scale(1.2);
    }
    80% {
      opacity: 0.6;
      transform: translateY(-60px) rotate(135deg) scale(0.8);
    }
  }

  /* Magic dust particles */
  .dust {
    position: absolute;
    width: 3px;
    height: 3px;
    background: linear-gradient(135deg, #c084fc, #fbbf24);
    border-radius: 50%;
    animation: drift-dust var(--duration) linear infinite;
    opacity: 0;
    box-shadow: 0 0 4px 1px rgba(192,132,252,.4);
  }

  .dust:nth-child(31) { left: 5%;  --duration: 15s; animation-delay: 0s; }
  .dust:nth-child(32) { left: 15%; --duration: 18s; animation-delay: 2s; }
  .dust:nth-child(33) { left: 25%; --duration: 14s; animation-delay: 4s; }
  .dust:nth-child(34) { left: 35%; --duration: 20s; animation-delay: 1s; }
  .dust:nth-child(35) { left: 45%; --duration: 16s; animation-delay: 3s; }
  .dust:nth-child(36) { left: 55%; --duration: 19s; animation-delay: 5s; }
  .dust:nth-child(37) { left: 65%; --duration: 17s; animation-delay: 2.5s; }
  .dust:nth-child(38) { left: 75%; --duration: 21s; animation-delay: 4.5s; }
  .dust:nth-child(39) { left: 85%; --duration: 15s; animation-delay: 1.5s; }
  .dust:nth-child(40) { left: 95%; --duration: 18s; animation-delay: 3.5s; }

  @keyframes drift-dust {
    0% {
      top: 100%;
      opacity: 0;
      transform: translateX(0);
    }
    10% {
      opacity: 0.6;
    }
    50% {
      opacity: 0.8;
      transform: translateX(30px);
    }
    90% {
      opacity: 0.4;
    }
    100% {
      top: -5%;
      opacity: 0;
      transform: translateX(-20px);
    }
  }

  /* Glowing orbs */
  .orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    animation: orb-pulse var(--duration) ease-in-out infinite;
    opacity: 0.4;
  }

  .orb:nth-child(41) {
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(139,92,246,.6) 0%, transparent 70%);
    left: -100px;
    top: 10%;
    --duration: 8s;
  }

  .orb:nth-child(42) {
    width: 250px;
    height: 250px;
    background: radial-gradient(circle, rgba(251,191,36,.5) 0%, transparent 70%);
    right: -80px;
    top: 30%;
    --duration: 10s;
    animation-delay: 2s;
  }

  .orb:nth-child(43) {
    width: 350px;
    height: 350px;
    background: radial-gradient(circle, rgba(244,114,182,.4) 0%, transparent 70%);
    left: 30%;
    bottom: 10%;
    --duration: 12s;
    animation-delay: 4s;
  }

  @keyframes orb-pulse {
    0%, 100% {
      transform: scale(1) translate(0, 0);
      opacity: 0.3;
    }
    50% {
      transform: scale(1.2) translate(20px, -20px);
      opacity: 0.5;
    }
  }

  /* Container */
  .quiz-container {
    position: relative;
    z-index: 1;
    max-width: 800px;
    margin: 0 auto;
    padding: 40px 24px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* Header */
  .quiz-header {
    text-align: center;
    margin-bottom: 20px;
  }

  .start-container .quiz-header {
    margin-bottom: 16px;
  }

  .quiz-logo {
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: rgba(255,255,255,.6);
    margin-bottom: 16px;
  }

  .quiz-logo a {
    color: #c084fc;
    text-decoration: none;
    text-shadow: 0 0 10px rgba(192,132,252,.4);
    transition: all 0.3s ease;
  }

  .quiz-logo a:hover {
    color: #fbbf24;
    text-shadow: 0 0 20px rgba(251,191,36,.6);
  }

  .quiz-title {
    font-size: clamp(26px, 5vw, 42px);
    font-weight: 800;
    line-height: 1.15;
    background: linear-gradient(135deg, #fff 0%, #e9d5ff 30%, #c084fc 50%, #fbbf24 80%, #fff 100%);
    background-size: 300% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
    animation: title-shimmer 5s ease-in-out infinite;
    filter: drop-shadow(0 2px 10px rgba(192,132,252,.3));
  }

  @keyframes title-shimmer {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  .quiz-subtitle {
    font-size: 17px;
    color: rgba(255,255,255,.65);
    max-width: 550px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* Info section - Premium Design */
  .info-section {
    margin: 40px auto;
    max-width: 700px;
    text-align: center;
  }

  .info-section-header {
    margin-bottom: 32px;
  }

  .info-section-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 20px;
    background: linear-gradient(135deg, rgba(139,92,246,.2) 0%, rgba(251,191,36,.15) 100%);
    border-radius: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
    box-shadow: 0 10px 40px rgba(139,92,246,.2), inset 0 0 30px rgba(255,255,255,.05);
    animation: icon-float 4s ease-in-out infinite;
    position: relative;
  }

  .info-section-icon::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(135deg, #8b5cf6, #fbbf24, #f472b6, #8b5cf6);
    border-radius: 26px;
    z-index: -1;
    opacity: 0.5;
    animation: border-rotate 4s linear infinite;
    background-size: 300% 300%;
  }

  @keyframes icon-float {
    0%, 100% { transform: translateY(0) rotate(-2deg); }
    50% { transform: translateY(-8px) rotate(2deg); }
  }

  @keyframes border-rotate {
    0% { background-position: 0% 50%; }
    100% { background-position: 300% 50%; }
  }

  .info-section-title {
    font-size: clamp(22px, 4.5vw, 28px);
    font-weight: 800;
    background: linear-gradient(135deg, #fff 0%, #e9d5ff 50%, #fbbf24 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
  }

  .info-section-subtitle {
    font-size: 16px;
    color: rgba(255,255,255,.6);
    max-width: 500px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* Benefits cards grid */
  .benefits-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 28px;
  }

  @media (max-width: 550px) {
    .benefits-grid {
      grid-template-columns: 1fr;
    }
  }

  .benefit-card {
    background: rgba(255,255,255,.03);
    border: 1px solid rgba(255,255,255,.08);
    border-radius: 20px;
    padding: 24px 20px;
    text-align: left;
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: default;
  }

  .benefit-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--accent);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .benefit-card::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, var(--glow) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.4s ease;
    pointer-events: none;
  }

  .benefit-card:hover {
    transform: translateY(-4px);
    border-color: rgba(255,255,255,.15);
    background: rgba(255,255,255,.05);
    box-shadow: 0 20px 40px rgba(0,0,0,.2);
  }

  .benefit-card:hover::before {
    opacity: 1;
  }

  .benefit-card:hover::after {
    opacity: 0.15;
  }

  .benefit-card:nth-child(1) { --accent: linear-gradient(90deg, #fbbf24, #f59e0b); --glow: rgba(251,191,36,.3); }
  .benefit-card:nth-child(2) { --accent: linear-gradient(90deg, #c084fc, #a855f7); --glow: rgba(192,132,252,.3); }
  .benefit-card:nth-child(3) { --accent: linear-gradient(90deg, #f472b6, #ec4899); --glow: rgba(244,114,182,.3); }
  .benefit-card:nth-child(4) { --accent: linear-gradient(90deg, #60a5fa, #3b82f6); --glow: rgba(96,165,250,.3); }

  .benefit-icon-wrapper {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    margin-bottom: 14px;
    position: relative;
    z-index: 1;
  }

  .benefit-card:nth-child(1) .benefit-icon-wrapper { background: rgba(251,191,36,.15); }
  .benefit-card:nth-child(2) .benefit-icon-wrapper { background: rgba(192,132,252,.15); }
  .benefit-card:nth-child(3) .benefit-icon-wrapper { background: rgba(244,114,182,.15); }
  .benefit-card:nth-child(4) .benefit-icon-wrapper { background: rgba(96,165,250,.15); }

  .benefit-title {
    font-size: 15px;
    font-weight: 700;
    color: #fff;
    margin-bottom: 6px;
    position: relative;
    z-index: 1;
  }

  .benefit-text {
    font-size: 13px;
    color: rgba(255,255,255,.55);
    line-height: 1.5;
    position: relative;
    z-index: 1;
  }

  /* Bottom highlight banner */
  .info-highlight-banner {
    background: linear-gradient(135deg, rgba(139,92,246,.12) 0%, rgba(251,191,36,.08) 100%);
    border: 1px solid rgba(251,191,36,.2);
    border-radius: 16px;
    padding: 20px 24px;
    display: flex;
    align-items: center;
    gap: 16px;
    text-align: left;
    position: relative;
    overflow: hidden;
  }

  .info-highlight-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #fbbf24, #f472b6, #8b5cf6);
    border-radius: 4px 0 0 4px;
  }

  .highlight-icon {
    width: 50px;
    height: 50px;
    flex-shrink: 0;
    background: linear-gradient(135deg, rgba(251,191,36,.2), rgba(244,114,182,.15));
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    animation: pulse-glow 2s ease-in-out infinite;
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 0 0 rgba(251,191,36,.3); }
    50% { box-shadow: 0 0 20px 5px rgba(251,191,36,.2); }
  }

  .highlight-content {
    flex: 1;
  }

  .highlight-title {
    font-size: 14px;
    font-weight: 700;
    color: #fbbf24;
    margin-bottom: 4px;
  }

  .highlight-text {
    font-size: 13px;
    color: rgba(255,255,255,.7);
    line-height: 1.5;
  }

  @media (max-width: 500px) {
    .info-highlight-banner {
      flex-direction: column;
      text-align: center;
      padding: 20px;
    }

    .info-highlight-banner::before {
      width: 100%;
      height: 4px;
      border-radius: 4px 4px 0 0;
    }

    .benefit-card {
      padding: 20px 16px;
    }

    .info-section-icon {
      width: 70px;
      height: 70px;
      font-size: 34px;
    }
  }

  /* Feature badges */
  .features {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 20px;
    margin-bottom: 12px;
  }

  .feature-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(192,132,252,.2);
    border-radius: 30px;
    font-size: 13px;
    font-weight: 500;
    color: rgba(255,255,255,.8);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
  }

  .feature-badge:hover {
    background: rgba(192,132,252,.1);
    border-color: rgba(251,191,36,.3);
    transform: translateY(-2px);
  }

  .feature-badge .icon {
    font-size: 16px;
  }

  /* Progress bar */
  .progress-container {
    margin-bottom: 32px;
  }

  .progress-text {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: rgba(255,255,255,.5);
    margin-bottom: 8px;
  }

  .progress-bar {
    height: 6px;
    background: rgba(255,255,255,.1);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #8b5cf6, #c084fc, #f472b6, #fbbf24);
    background-size: 300% 100%;
    border-radius: 3px;
    transition: width 0.5s ease;
    width: 0%;
    box-shadow: 0 0 10px rgba(192,132,252,.6), 0 0 20px rgba(251,191,36,.3);
    animation: shimmer 3s linear infinite;
  }

  @keyframes shimmer {
    0% { background-position: 0% 50%; }
    100% { background-position: 300% 50%; }
  }

  /* Question */
  .question-container {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .question-wrapper {
    display: none;
    animation: fadeIn 0.5s ease;
  }

  .question-wrapper.active {
    display: block;
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(30px) scale(0.95);
      filter: blur(5px);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: blur(0);
    }
  }

  .question-number {
    display: inline-block;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #c084fc;
    margin-bottom: 12px;
    text-shadow: 0 0 10px rgba(192,132,252,.5);
  }

  .question-context {
    font-size: 14px;
    color: rgba(255,255,255,.5);
    margin-bottom: 8px;
    font-style: italic;
  }

  .question-text {
    font-size: clamp(18px, 4vw, 26px);
    font-weight: 700;
    margin-bottom: 28px;
    line-height: 1.3;
  }

  /* Flip cards grid */
  .cards-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }

  @media (max-width: 500px) {
    .cards-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Flip card */
  .flip-card {
    perspective: 1000px;
    height: 130px;
    cursor: pointer;
  }

  .flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;
  }

  .flip-card.flipped .flip-card-inner {
    transform: rotateY(180deg);
  }

  .flip-card-front,
  .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 18px;
    text-align: center;
  }

  .flip-card-front {
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(255,255,255,.12);
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(0,0,0,.2);
  }

  .flip-card:hover .flip-card-front {
    border-color: rgba(192,132,252,.5);
    background: rgba(192,132,252,.1);
    box-shadow: 0 8px 30px rgba(192,132,252,.3), 0 0 40px rgba(251,191,36,.15);
    transform: scale(1.02);
  }

  .flip-card:active .flip-card-front {
    transform: scale(0.98);
  }

  .flip-card-back {
    background: linear-gradient(135deg, #8b5cf6, #c084fc, #f472b6);
    transform: rotateY(180deg);
    box-shadow: 0 0 30px rgba(192,132,252,.5), inset 0 0 20px rgba(255,255,255,.1);
  }

  .flip-card.flipped .flip-card-back {
    animation: magic-glow 1.5s ease-in-out;
  }

  @keyframes magic-glow {
    0% { box-shadow: 0 0 30px rgba(192,132,252,.5), inset 0 0 20px rgba(255,255,255,.1); }
    50% { box-shadow: 0 0 50px rgba(251,191,36,.7), 0 0 80px rgba(192,132,252,.5), inset 0 0 30px rgba(255,255,255,.2); }
    100% { box-shadow: 0 0 30px rgba(192,132,252,.5), inset 0 0 20px rgba(255,255,255,.1); }
  }

  .card-emoji {
    font-size: 32px;
    margin-bottom: 10px;
  }

  .card-text {
    font-size: 14px;
    font-weight: 500;
    color: rgba(255,255,255,.9);
    line-height: 1.4;
  }

  .card-selected-text {
    font-size: 15px;
    font-weight: 600;
    color: #fff;
  }

  .card-checkmark {
    font-size: 28px;
    margin-bottom: 6px;
  }

  /* Result screen */
  .result-container {
    display: none;
    text-align: center;
  }

  .result-container.active {
    display: block;
    animation: magic-appear 1s ease-out;
  }

  @keyframes magic-appear {
    0% {
      opacity: 0;
      transform: scale(0.8) translateY(30px);
      filter: blur(10px);
    }
    50% {
      filter: blur(0);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0);
      filter: blur(0);
    }
  }

  .result-emoji {
    font-size: 80px;
    margin-bottom: 24px;
    animation: magic-reveal 2s ease-in-out infinite;
    filter: drop-shadow(0 0 25px rgba(251,191,36,.6)) drop-shadow(0 0 50px rgba(192,132,252,.4));
  }

  @keyframes magic-reveal {
    0%, 100% {
      transform: translateY(0) scale(1);
      filter: drop-shadow(0 0 25px rgba(251,191,36,.6)) drop-shadow(0 0 50px rgba(192,132,252,.4));
    }
    25% {
      transform: translateY(-10px) scale(1.05);
    }
    50% {
      transform: translateY(-20px) scale(1.1);
      filter: drop-shadow(0 0 35px rgba(251,191,36,.8)) drop-shadow(0 0 70px rgba(192,132,252,.6));
    }
    75% {
      transform: translateY(-10px) scale(1.05);
    }
  }

  .result-label {
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: #c084fc;
    margin-bottom: 16px;
    text-shadow: 0 0 15px rgba(192,132,252,.6);
  }

  .result-title {
    font-size: clamp(28px, 6vw, 42px);
    font-weight: 800;
    margin-bottom: 16px;
    background: linear-gradient(135deg, #fff 0%, #e9d5ff 25%, #c084fc 50%, #fbbf24 75%, #fff 100%);
    background-size: 400% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: result-shimmer 4s ease-in-out infinite;
    filter: drop-shadow(0 4px 15px rgba(192,132,252,.4));
  }

  @keyframes result-shimmer {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  .result-description {
    font-size: 17px;
    color: rgba(255,255,255,.75);
    max-width: 550px;
    margin: 0 auto 28px;
    line-height: 1.65;
  }

  /* Psychology block */
  .psychology-block {
    background: rgba(139,92,246,.08);
    border: 1px solid rgba(139,92,246,.2);
    border-radius: 20px;
    padding: 28px;
    margin: 0 auto 32px;
    max-width: 550px;
    text-align: left;
  }

  .psychology-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 16px;
    font-weight: 700;
    color: #e9d5ff;
    margin-bottom: 14px;
  }

  .psychology-title span {
    font-size: 20px;
  }

  .psychology-block p {
    font-size: 14px;
    color: rgba(255,255,255,.7);
    line-height: 1.7;
    margin-bottom: 12px;
  }

  .psychology-block p:last-child {
    margin-bottom: 0;
  }

  .psychology-block strong {
    color: #fbbf24;
  }

  /* Voice message CTA block */
  .voice-cta {
    background: linear-gradient(135deg, rgba(251,191,36,.12) 0%, rgba(244,114,182,.08) 100%);
    border: 1px solid rgba(251,191,36,.3);
    border-radius: 20px;
    padding: 24px 28px;
    margin: 0 auto 32px;
    max-width: 550px;
    text-align: center;
  }

  .voice-cta-icon {
    font-size: 40px;
    margin-bottom: 12px;
    display: block;
    animation: voice-pulse 2s ease-in-out infinite;
  }

  @keyframes voice-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }

  .voice-cta-title {
    font-size: 18px;
    font-weight: 700;
    color: #fbbf24;
    margin-bottom: 10px;
  }

  .voice-cta p {
    font-size: 15px;
    color: rgba(255,255,255,.8);
    line-height: 1.6;
    margin-bottom: 0;
  }

  .voice-cta strong {
    color: #fff;
  }

  .result-toys {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
    margin-bottom: 36px;
  }

  .toy-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 12px;
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(192,132,252,.3);
    border-radius: 16px;
    transition: all 0.3s ease;
    animation: toy-appear 0.8s ease-out backwards;
    box-shadow: 0 4px 20px rgba(0,0,0,.2);
    text-decoration: none;
    color: #fff;
    width: 120px;
  }

  .toy-card:nth-child(1) { animation-delay: 0.1s; }
  .toy-card:nth-child(2) { animation-delay: 0.2s; }
  .toy-card:nth-child(3) { animation-delay: 0.3s; }

  @keyframes toy-appear {
    from {
      opacity: 0;
      transform: translateY(30px) scale(0.7);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .toy-card:hover {
    background: rgba(192,132,252,.15);
    border-color: rgba(251,191,36,.5);
    box-shadow: 0 8px 35px rgba(192,132,252,.4), 0 0 50px rgba(251,191,36,.2);
    transform: translateY(-8px) scale(1.05);
  }

  .toy-image {
    width: 90px;
    height: 90px;
    border-radius: 12px;
    object-fit: cover;
    background: rgba(255,255,255,.1);
    box-shadow: 0 4px 15px rgba(0,0,0,.3);
    transition: transform 0.3s ease;
  }

  .toy-card:hover .toy-image {
    transform: scale(1.08);
  }

  .toy-name {
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    line-height: 1.2;
  }

  @media (max-width: 500px) {
    .toy-card {
      width: 100px;
      padding: 10px;
    }
    .toy-image {
      width: 70px;
      height: 70px;
    }
    .toy-name {
      font-size: 12px;
    }
  }

  .toys-hint {
    font-size: 14px;
    color: rgba(255,255,255,.6);
    text-align: center;
    margin: 16px 0 8px;
  }

  .result-buttons {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }

  .btn-catalog {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 18px 40px;
    border-radius: 50px;
    background: linear-gradient(135deg, #8b5cf6, #c084fc, #f472b6);
    background-size: 200% 200%;
    color: #fff;
    font-size: 17px;
    font-weight: 600;
    text-decoration: none;
    box-shadow: 0 10px 35px rgba(139,92,246,.4), 0 0 60px rgba(251,191,36,.2);
    transition: box-shadow 0.3s, transform 0.2s;
    animation: btn-glow 3s ease-in-out infinite;
    position: relative;
    overflow: hidden;
  }

  .btn-catalog::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.3), transparent);
    animation: btn-shine 3s ease-in-out infinite;
  }

  .btn-catalog:hover {
    box-shadow: 0 14px 50px rgba(139,92,246,.6), 0 0 100px rgba(251,191,36,.4);
    transform: translateY(-3px) scale(1.02);
  }

  .btn-restart {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 14px 28px;
    border-radius: 50px;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(192,132,252,.25);
    color: #fff;
    font-size: 15px;
    font-weight: 500;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,.15);
  }

  .btn-restart:hover {
    background: rgba(192,132,252,.15);
    border-color: rgba(251,191,36,.4);
    box-shadow: 0 6px 25px rgba(192,132,252,.25);
    transform: translateY(-2px);
  }

  .btn-restart:active {
    transform: translateY(0);
  }

  /* Start screen */
  .start-container {
    text-align: center;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding-top: 20px;
  }

  .start-container.hidden {
    display: none;
  }

  .start-emoji {
    font-size: 80px;
    margin-bottom: 16px;
    animation: magic-float 4s ease-in-out infinite;
    filter: drop-shadow(0 0 20px rgba(251,191,36,.5)) drop-shadow(0 0 40px rgba(192,132,252,.3));
    position: relative;
  }

  @keyframes magic-float {
    0%, 100% {
      transform: translateY(0) rotate(-2deg);
      filter: drop-shadow(0 0 20px rgba(251,191,36,.5)) drop-shadow(0 0 40px rgba(192,132,252,.3));
    }
    50% {
      transform: translateY(-20px) rotate(2deg);
      filter: drop-shadow(0 0 30px rgba(251,191,36,.7)) drop-shadow(0 0 60px rgba(192,132,252,.5));
    }
  }

  .btn-start {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 20px 48px;
    border-radius: 50px;
    background: linear-gradient(135deg, #8b5cf6, #c084fc, #f472b6);
    background-size: 200% 200%;
    color: #fff;
    font-size: 18px;
    font-weight: 600;
    text-decoration: none;
    cursor: pointer;
    border: none;
    box-shadow: 0 10px 35px rgba(139,92,246,.4), 0 0 60px rgba(251,191,36,.2);
    transition: box-shadow 0.3s, transform 0.2s;
    margin-top: 24px;
    animation: btn-glow 3s ease-in-out infinite;
    position: relative;
    overflow: hidden;
  }

  .btn-start::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.3), transparent);
    animation: btn-shine 3s ease-in-out infinite;
  }

  @keyframes btn-glow {
    0%, 100% {
      background-position: 0% 50%;
      box-shadow: 0 10px 35px rgba(139,92,246,.4), 0 0 60px rgba(251,191,36,.2);
    }
    50% {
      background-position: 100% 50%;
      box-shadow: 0 10px 45px rgba(139,92,246,.6), 0 0 80px rgba(251,191,36,.4);
    }
  }

  @keyframes btn-shine {
    0%, 100% { left: -100%; }
    50% { left: 100%; }
  }

  .btn-start:hover {
    box-shadow: 0 14px 50px rgba(139,92,246,.6), 0 0 100px rgba(251,191,36,.4);
    transform: translateY(-3px) scale(1.02);
  }

  /* Quiz area hidden initially */
  .quiz-area {
    display: none;
  }

  .quiz-area.active {
    display: block;
  }

  /* Back to main site */
  .back-link {
    position: fixed;
    top: 20px;
    left: 20px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(192,132,252,.2);
    border-radius: 30px;
    color: rgba(255,255,255,.7);
    font-size: 14px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
    z-index: 100;
    box-shadow: 0 4px 15px rgba(0,0,0,.2);
  }

  .back-link:hover {
    background: rgba(192,132,252,.15);
    border-color: rgba(251,191,36,.4);
    color: #fff;
    box-shadow: 0 4px 25px rgba(192,132,252,.3);
    transform: translateX(-3px);
  }

  @media (max-width: 600px) {
    .back-link {
      position: static;
      margin-bottom: 20px;
      align-self: flex-start;
    }

    .quiz-container {
      padding-top: 20px;
    }

    .info-box {
      padding: 22px;
      margin: 24px auto;
    }

    .info-box-title {
      font-size: 16px;
    }

    .info-box p {
      font-size: 14px;
    }

    .info-box li {
      font-size: 13px;
    }

    .features {
      gap: 8px;
      margin-top: 20px;
    }

    .feature-badge {
      padding: 8px 14px;
      font-size: 12px;
    }

    .feature-badge .icon {
      font-size: 14px;
    }

    .psychology-block {
      padding: 22px;
    }

    .psychology-title {
      font-size: 15px;
    }

    .psychology-block p {
      font-size: 13px;
    }

    .orb {
      display: none;
    }
  }

  @media (max-width: 400px) {
    .features {
      flex-direction: column;
      align-items: center;
    }
  }
</style>
</head>
<body>

<!-- Magic background -->
<div class="magic-bg">
  <!-- Twinkling stars -->
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <!-- Floating sparkles -->
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <div class="sparkle"></div>
  <!-- Magic dust -->
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <div class="dust"></div>
  <!-- Glowing orbs -->
  <div class="orb"></div>
  <div class="orb"></div>
  <div class="orb"></div>
</div>

<div class="quiz-container">

  <a href="#" class="back-link" onclick="goToStart(); return false;">
    <span>&larr;</span> В начало
  </a>

  <!-- Start Screen -->
  <div class="start-container" id="startScreen">
    <div class="quiz-header">
      <div class="quiz-logo"><a href="https://filiusmagic.ru">Filius Magic</a></div>
      <h1 class="quiz-title">Узнайте характер своего ребёнка</h1>
      <p class="quiz-subtitle">Психологический квиз для родителей: какая игрушка станет настоящим другом вашему малышу?</p>

      <div class="features">
        <div class="feature-badge">
          <span class="icon">3 мин</span>
        </div>
        <div class="feature-badge">
          <span class="icon">10 вопросов</span>
        </div>
        <div class="feature-badge">
          <span class="icon">Научный подход</span>
        </div>
      </div>
    </div>

    <div class="info-section">
      <div class="info-section-header">
        <div class="info-section-icon">&#129528;</div>
        <h2 class="info-section-title">Зачем ребёнку нужна «своя» игрушка?</h2>
        <p class="info-section-subtitle">Детские психологи единогласны: у каждого ребёнка должна быть особенная игрушка &mdash; настоящий друг, который растёт вместе с ним</p>
      </div>

      <div class="benefits-grid">
        <div class="benefit-card">
          <div class="benefit-icon-wrapper">&#128155;</div>
          <div class="benefit-title">Эмоциональный якорь</div>
          <div class="benefit-text">В моменты стресса ребёнок обнимает друга и чувствует безопасность &mdash; игрушка становится островком спокойствия</div>
        </div>

        <div class="benefit-card">
          <div class="benefit-icon-wrapper">&#10024;</div>
          <div class="benefit-title">Развитие эмпатии</div>
          <div class="benefit-text">Заботясь об игрушке, ребёнок учится заботиться о других &mdash; это первый опыт ответственности за кого-то</div>
        </div>

        <div class="benefit-card">
          <div class="benefit-icon-wrapper">&#128172;</div>
          <div class="benefit-title">Первый собеседник</div>
          <div class="benefit-text">С игрушкой можно обсудить всё, что сложно сказать взрослым &mdash; страхи, мечты, секреты</div>
        </div>

        <div class="benefit-card">
          <div class="benefit-icon-wrapper">&#127968;</div>
          <div class="benefit-title">Связь с домом</div>
          <div class="benefit-text">В путешествиях, в садике, на даче &mdash; игрушка остаётся кусочком родного и знакомого</div>
        </div>
      </div>

      <div class="info-highlight-banner">
        <div class="highlight-icon">&#128150;</div>
        <div class="highlight-content">
          <div class="highlight-title">Друг на всю жизнь</div>
          <div class="highlight-text">Правильно подобранная игрушка, созданная руками самого ребёнка &mdash; это не просто вещь, а настоящий компаньон, который поможет пережить любые трудности</div>
        </div>
      </div>
    </div>

    <button class="btn-start" onclick="startQuiz()">
      Начать квиз
      <span>&rarr;</span>
    </button>
  </div>

  <!-- Quiz Area -->
  <div class="quiz-area" id="quizArea">

    <div class="quiz-header">
      <div class="quiz-logo"><a href="https://filiusmagic.ru">Filius Magic</a></div>
      <h1 class="quiz-title">Узнаём характер</h1>
    </div>

    <!-- Progress -->
    <div class="progress-container">
      <div class="progress-text">
        <span>Вопрос <span id="currentQ">1</span> из 10</span>
        <span id="progressPercent">0%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <!-- Questions -->
    <div class="question-container" id="questionContainer">

      <!-- Question 1 -->
      <div class="question-wrapper" data-question="1">
        <span class="question-number">Вопрос 1</span>
        <p class="question-context">Наблюдаем за ребёнком в новой обстановке</p>
        <h2 class="question-text">Как ваш ребёнок ведёт себя на детской площадке, где много незнакомых детей?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128040;</span>
                <span class="card-text">Сначала наблюдает издалека, потом осторожно присоединяется</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Осторожный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128054;</span>
                <span class="card-text">Ищет одного-двух друзей и играет только с ними</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Верный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129446;</span>
                <span class="card-text">Сразу бежит исследовать все горки и качели</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Исследователь</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129417;</span>
                <span class="card-text">Может уйти в свой мир, играть один в воображаемые игры</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Фантазёр</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 2 -->
      <div class="question-wrapper" data-question="2">
        <span class="question-number">Вопрос 2</span>
        <p class="question-context">Реакция на стресс</p>
        <h2 class="question-text">Что делает ребёнок, когда расстроен или напуган?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129303;</span>
                <span class="card-text">Ищет объятия, прячется под одеяло или к маме</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Нуждается в тепле</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128172;</span>
                <span class="card-text">Хочет поговорить, рассказать что случилось</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Нужен собеседник</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127939;</span>
                <span class="card-text">Старается отвлечься &mdash; побегать, поиграть</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Активный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127912;</span>
                <span class="card-text">Уходит рисовать, строить или фантазировать</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Творческий</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 3 -->
      <div class="question-wrapper" data-question="3">
        <span class="question-number">Вопрос 3</span>
        <p class="question-context">Стиль игры</p>
        <h2 class="question-text">Какие игры ваш ребёнок выбирает чаще всего?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128058;</span>
                <span class="card-text">Тихие игры: пазлы, рисование, чтение</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Созерцатель</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127922;</span>
                <span class="card-text">Настольные игры, игры с правилами в компании</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Командный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128678;</span>
                <span class="card-text">Подвижные игры, спорт, догонялки</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Энергичный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127917;</span>
                <span class="card-text">Ролевые игры, создание миров, переодевания</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Режиссёр</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 4 -->
      <div class="question-wrapper" data-question="4">
        <span class="question-number">Вопрос 4</span>
        <p class="question-context">Отношение к переменам</p>
        <h2 class="question-text">Как ребёнок реагирует на что-то новое (новая еда, место, человек)?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128528;</span>
                <span class="card-text">Настороженно, нужно время чтобы привыкнуть</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Осторожный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128105;&#8205;&#128105;&#8205;&#128102;</span>
                <span class="card-text">Спокойно, если рядом близкие люди</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Семейный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129321;</span>
                <span class="card-text">С интересом! Новое &mdash; это приключение</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Авантюрист</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129300;</span>
                <span class="card-text">Задаёт много вопросов, хочет понять &laquo;почему&raquo;</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Философ</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 5 -->
      <div class="question-wrapper" data-question="5">
        <span class="question-number">Вопрос 5</span>
        <p class="question-context">Время засыпания</p>
        <h2 class="question-text">Что помогает вашему ребёнку заснуть?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129528;</span>
                <span class="card-text">Обнять мягкую игрушку, почувствовать тепло</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Тактильный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128483;</span>
                <span class="card-text">Разговор перед сном, обсудить день</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Общительный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128564;</span>
                <span class="card-text">Устать за день от активностей и сразу уснуть</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Активный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128214;</span>
                <span class="card-text">Сказка на ночь, мечтать о приключениях</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Мечтатель</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 6 -->
      <div class="question-wrapper" data-question="6">
        <span class="question-number">Вопрос 6</span>
        <p class="question-context">Способ выражения любви</p>
        <h2 class="question-text">Как ваш ребёнок чаще всего показывает свою любовь?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129303;</span>
                <span class="card-text">Обнимашки, поцелуи, держаться за руку</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Нежный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129309;</span>
                <span class="card-text">Всегда рядом, помогает, защищает младших</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Защитник</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127881;</span>
                <span class="card-text">Зовёт поиграть, делится открытиями</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Делится радостью</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127873;</span>
                <span class="card-text">Дарит рисунки, поделки, &laquo;сюрпризы&raquo;</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Творец</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 7 -->
      <div class="question-wrapper" data-question="7">
        <span class="question-number">Вопрос 7</span>
        <p class="question-context">Социальные предпочтения</p>
        <h2 class="question-text">Сколько друзей предпочитает ваш ребёнок?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128049;</span>
                <span class="card-text">Достаточно одного близкого друга или игрушки</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Интроверт</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128101;</span>
                <span class="card-text">Небольшой круг &mdash; 2-3 верных друга</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Избирательный</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127752;</span>
                <span class="card-text">Чем больше, тем веселее! Легко находит общий язык</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Экстраверт</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127912;</span>
                <span class="card-text">Дружит с теми, кто разделяет его интересы и фантазии</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Единомышленник</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 8 -->
      <div class="question-wrapper" data-question="8">
        <span class="question-number">Вопрос 8</span>
        <p class="question-context">Любимое время</p>
        <h2 class="question-text">Какое время дня ваш ребёнок любит больше всего?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127769;</span>
                <span class="card-text">Вечер &mdash; уютно, тихо, можно помечтать</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Вечерний</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127765;</span>
                <span class="card-text">Когда вся семья вместе &mdash; утро выходного или ужин</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Семейное время</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#9728;&#65039;</span>
                <span class="card-text">День &mdash; когда можно гулять и играть!</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Дневной</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127748;</span>
                <span class="card-text">Утро &mdash; впереди целый день возможностей</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Утренний</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 9 -->
      <div class="question-wrapper" data-question="9">
        <span class="question-number">Вопрос 9</span>
        <p class="question-context">Любимые истории</p>
        <h2 class="question-text">Какие книги и мультфильмы больше всего нравятся?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128156;</span>
                <span class="card-text">Истории о дружбе, семье, тёплых отношениях</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Душевные</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129497;</span>
                <span class="card-text">Про героев, которые защищают и помогают</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Героические</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#127757;</span>
                <span class="card-text">Приключения, путешествия, открытия</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Приключенческие</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#10024;</span>
                <span class="card-text">Волшебство, фэнтези, необычные миры</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Волшебные</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Question 10 -->
      <div class="question-wrapper" data-question="10">
        <span class="question-number">Вопрос 10</span>
        <p class="question-context">Идеальный друг</p>
        <h2 class="question-text">Каким должен быть идеальный плюшевый друг для вашего ребёнка?</h2>
        <div class="cards-grid">
          <div class="flip-card" onclick="selectAnswer(this, 'gentle')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128049;</span>
                <span class="card-text">Мягким, тёплым, уютным &mdash; чтобы обнимать</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Уютный друг</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'loyal')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#128021;</span>
                <span class="card-text">Надёжным, верным &mdash; всегда рядом</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Верный друг</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'explorer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129437;</span>
                <span class="card-text">Весёлым, готовым к приключениям</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Друг-авантюрист</span>
              </div>
            </div>
          </div>
          <div class="flip-card" onclick="selectAnswer(this, 'dreamer')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <span class="card-emoji">&#129417;</span>
                <span class="card-text">Волшебным, особенным, с характером</span>
              </div>
              <div class="flip-card-back">
                <span class="card-checkmark">&#10003;</span>
                <span class="card-selected-text">Волшебный друг</span>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Result -->
    <div class="result-container" id="resultContainer">
      <div class="result-emoji" id="resultEmoji">&#129528;</div>
      <span class="result-label">Характер вашего ребёнка</span>
      <h2 class="result-title" id="resultTitle">Загрузка...</h2>
      <p class="result-description" id="resultDescription"></p>

      <div class="psychology-block" id="psychologyBlock">
        <div class="psychology-title">
          <span>&#128161;</span>
          <span id="psychologyTitle">Почему это важно</span>
        </div>
        <p id="psychologyText"></p>
      </div>

      <div class="voice-cta">
        <span class="voice-cta-icon">&#128266;</span>
        <div class="voice-cta-title">Сделайте игрушку особенной</div>
        <p id="voiceCtaText">А что, если эта игрушка будет хранить <strong>ваш голос</strong>? В мастерских Filius Magic ребёнок сам создаёт своего друга, а вы можете записать голосовое послание &mdash; слова любви, поддержки, колыбельную. Эта запись останется с ребёнком навсегда: в трудную минуту он обнимет игрушку и услышит ваш голос.</p>
      </div>

      <div class="result-toys" id="resultToys"></div>
      <p class="toys-hint">Нажми на игрушку, чтобы узнать о ней подробнее</p>
      <div class="result-buttons">
        <button class="btn-restart" onclick="restartQuiz()">
          <span>&#8635;</span> Пройти ещё раз
        </button>
      </div>
    </div>

  </div>
</div>

<script>
  // Quiz data with psychology-based results
  const results = {
    gentle: {
      emoji: '&#128049;',
      title: 'Нежная душа',
      description: 'Ваш ребёнок &mdash; чуткий и глубоко чувствующий. Он ценит покой, тепло и близость. Ему важно иметь надёжного друга, который всегда рядом и даёт ощущение безопасности.',
      psychologyTitle: 'Что говорят психологи',
      psychologyText: 'Дети с высокой чувствительностью особенно нуждаются в <strong>&laquo;переходном объекте&raquo;</strong> &mdash; мягкой игрушке, которая помогает справиться с тревогой и переходами (засыпание, разлука с родителями, новые ситуации). Такая игрушка становится продолжением родительской любви, &laquo;кусочком дома&raquo;, который можно взять с собой. Идеальный друг для нежной души &mdash; мягкий, тёплый, с округлыми формами, похожий на обнимающего родителя.',
      voiceCta: 'Для нежной души особенно важно чувствовать связь с родителями. Представьте: ребёнок обнимает <strong>игрушку, которую создал сам</strong>, нажимает на сердечко &mdash; и слышит <strong>ваш голос</strong>, вашу колыбельную или слова любви. В мастерских Filius Magic вы можете записать голосовое послание, которое останется с ребёнком навсегда &mdash; как &laquo;кусочек мамы и папы&raquo;.',
      toys: [
        { name: 'Кот Филимон', image: 'https://static.tildacdn.com/stor3263-3739-4564-b333-613835663030/56756737.jpg', url: 'https://filiusmagic.ru/catalog/tproduct/843554203-519446734362-kot-filimon' },
        { name: 'Кот белый', image: 'https://static.tildacdn.com/tild3237-6332-4564-b762-326564373334/FlxY39A0u_o2WilbY1Gi.jpg', url: 'https://filiusmagic.ru/catalog/domashnie-zhivotnye/tproduct/860522787-392176925492-kot-filimon-belii' },
        { name: 'Панда Бамбук', image: 'https://static.tildacdn.com/stor3437-3735-4839-b136-646461313464/96191579.jpg', url: 'https://filiusmagic.ru/catalog/tproduct/843554203-368293322922-panda-bambuk' }
      ],
      catalogUrl: 'https://filiusmagic.ru/catalog/domashnie-zhivotnye'
    },
    loyal: {
      emoji: '&#128021;',
      title: 'Верный защитник',
      description: 'Ваш ребёнок ценит настоящую дружбу и преданность. Он избирателен в связях, но если выбирает друга &mdash; это навсегда. Ему нужен компаньон, на которого можно положиться.',
      psychologyTitle: 'Почему верность так важна',
      psychologyText: 'Дети, ориентированные на глубокие связи, формируют <strong>надёжный тип привязанности</strong>. Игрушка для такого ребёнка &mdash; не просто предмет, а настоящий член семьи. Она участвует в важных моментах, &laquo;знает&raquo; все секреты. Собака или похожее животное идеально подходит, потому что символизирует верность, защиту и безусловную любовь &mdash; именно то, что такой ребёнок ценит и готов дарить в ответ.',
      voiceCta: 'Верному защитнику важно знать, что его тоже любят и защищают. В мастерских Filius Magic ребёнок сам &laquo;оживляет&raquo; своего друга, а вы можете записать <strong>голосовое послание</strong> &mdash; слова поддержки, которые будут с ним всегда. &laquo;Я горжусь тобой&raquo;, &laquo;Ты справишься&raquo;, &laquo;Я всегда рядом&raquo; &mdash; эти слова <strong>вашим голосом</strong> станут для ребёнка опорой на всю жизнь.',
      toys: [
        { name: 'Хаски Хася', image: 'https://static.tildacdn.com/stor3337-6430-4033-b430-336263383439/52481704.jpg', url: 'https://filiusmagic.ru/catalog/domashnie-zhivotnye/tproduct/860522787-486475000312-haski-hasya' },
        { name: 'Бишон Элвис', image: 'https://static.tildacdn.com/stor3863-3438-4237-a534-373964306634/73791750.jpg', url: 'https://filiusmagic.ru/catalog/domashnie-zhivotnye/tproduct/860522787-541539202362-bishon-elvis' },
        { name: 'Медведь Гризли', image: 'https://static.tildacdn.com/stor3337-3234-4037-b432-643538343239/23208839.jpg', url: 'https://filiusmagic.ru/catalog/zhivotnye-lesa/tproduct/861560732-330095480002-medved-grizli' }
      ],
      catalogUrl: 'https://filiusmagic.ru/catalog/domashnie-zhivotnye'
    },
    explorer: {
      emoji: '&#129446;',
      title: 'Маленький исследователь',
      description: 'Ваш ребёнок полон энергии и любопытства! Он всегда в движении, открывает мир вокруг себя. Ему нужен друг-компаньон для приключений.',
      psychologyTitle: 'Энергия требует выхода',
      psychologyText: 'Активные дети обладают <strong>высоким уровнем сенсорной потребности</strong>. Им важно не просто иметь игрушку, а взаимодействовать с ней &mdash; брать в походы, приключения, игры. Лесные животные (еноты, лисы, медвежата) идеальны, потому что ассоциируются с природой и исследованиями. Такая игрушка &laquo;путешествует&raquo; вместе с ребёнком и становится свидетелем его открытий.',
      voiceCta: 'Ваш исследователь возьмёт своего друга в любое приключение! В мастерских Filius Magic ребёнок сам создаёт игрушку-компаньона, а вы можете записать <strong>голосовое послание</strong>: напутствие перед первым походом, пожелание удачи, слова &laquo;Возвращайся скорее, мы тебя ждём&raquo;. Этот <strong>голос из дома</strong> согреет маленького путешественника, где бы он ни был.',
      toys: [
        { name: 'Енотик Нико', image: 'https://static.tildacdn.com/stor3165-3265-4536-a133-613034656434/27163151.jpg', url: 'https://filiusmagic.ru/catalog/zhivotnye-lesa/tproduct/861560732-255252000722-enotik-niko' },
        { name: 'Пингвин Рико', image: 'https://static.tildacdn.com/stor3634-3038-4231-b935-356165353330/59443771.jpg', url: 'https://filiusmagic.ru/catalog/ptitsy/tproduct/861573781-315854756802-pingvin-riko' },
        { name: 'Хаски Хася', image: 'https://static.tildacdn.com/stor3337-6430-4033-b430-336263383439/52481704.jpg', url: 'https://filiusmagic.ru/catalog/domashnie-zhivotnye/tproduct/860522787-486475000312-haski-hasya' }
      ],
      catalogUrl: 'https://filiusmagic.ru/catalog/zhivotnye-lesa'
    },
    dreamer: {
      emoji: '&#129417;',
      title: 'Творческий мечтатель',
      description: 'Ваш ребёнок живёт в мире фантазий и творчества. Он видит волшебство в обычных вещах и создаёт свои вселенные. Ему нужен необычный друг с характером.',
      psychologyTitle: 'Сила воображения',
      psychologyText: 'Дети с богатым воображением развивают <strong>символическое мышление</strong> раньше сверстников. Их игрушка &mdash; не просто плюшевый зверь, а персонаж со своей историей, голосом, приключениями. Сова, единорог или необычное существо подходит идеально: оно уже &laquo;волшебное&raquo; и позволяет ребёнку наделить его любой историей. Такая игрушка становится соавтором творчества.',
      voiceCta: 'Для маленького волшебника игрушка &mdash; это персонаж со своей историей. В мастерских Filius Magic ребёнок сам &laquo;рождает&raquo; своего героя, а вы можете подарить ему <strong>волшебный голос</strong> &mdash; запишите сказку, которую рассказывает игрушка, или послание от &laquo;волшебного друга&raquo;. Этот <strong>голос</strong> станет частью магического мира ребёнка &mdash; секретом между вами.',
      toys: [
        { name: 'Сова Букля', image: 'https://static.tildacdn.com/stor3262-3334-4030-a662-386430366338/66261336.jpg', url: 'https://filiusmagic.ru/shop/tproduct/846249628-115579173412-sova-buklya' },
        { name: 'Кот Филимон', image: 'https://static.tildacdn.com/stor3263-3739-4564-b333-613835663030/56756737.jpg', url: 'https://filiusmagic.ru/catalog/tproduct/843554203-519446734362-kot-filimon' },
        { name: 'Панда Бамбук', image: 'https://static.tildacdn.com/stor3437-3735-4839-b136-646461313464/96191579.jpg', url: 'https://filiusmagic.ru/catalog/tproduct/843554203-368293322922-panda-bambuk' }
      ],
      catalogUrl: 'https://filiusmagic.ru/catalog/mificheskie-personazhi'
    }
  };

  // State
  let currentQuestion = 1;
  const totalQuestions = 10;
  const scores = { gentle: 0, loyal: 0, explorer: 0, dreamer: 0 };
  let isAnimating = false;

  // Start quiz
  function startQuiz() {
    document.getElementById('startScreen').classList.add('hidden');
    document.getElementById('quizArea').classList.add('active');
    showQuestion(1);
  }

  // Show question
  function showQuestion(num) {
    const questions = document.querySelectorAll('.question-wrapper');
    questions.forEach(q => q.classList.remove('active'));

    const current = document.querySelector(`[data-question="${num}"]`);
    if (current) {
      current.classList.add('active');
      // Reset flip states
      current.querySelectorAll('.flip-card').forEach(card => {
        card.classList.remove('flipped');
      });
    }

    updateProgress();
  }

  // Update progress
  function updateProgress() {
    const percent = Math.round(((currentQuestion - 1) / totalQuestions) * 100);
    document.getElementById('currentQ').textContent = currentQuestion;
    document.getElementById('progressPercent').textContent = percent + '%';
    document.getElementById('progressFill').style.width = percent + '%';
  }

  // Select answer
  function selectAnswer(card, type) {
    if (isAnimating) return;
    isAnimating = true;

    // Flip the card
    card.classList.add('flipped');

    // Add score
    scores[type]++;

    // Wait for animation then go to next
    setTimeout(() => {
      if (currentQuestion < totalQuestions) {
        currentQuestion++;
        showQuestion(currentQuestion);
      } else {
        showResult();
      }
      isAnimating = false;
    }, 800);
  }

  // Show result
  function showResult() {
    // Hide questions
    document.getElementById('questionContainer').style.display = 'none';
    document.querySelector('.progress-container').style.display = 'none';

    // Find winner
    let maxType = 'gentle';
    let maxScore = 0;
    for (const type in scores) {
      if (scores[type] > maxScore) {
        maxScore = scores[type];
        maxType = type;
      }
    }

    const result = results[maxType];

    // Update result display
    document.getElementById('resultEmoji').innerHTML = result.emoji;
    document.getElementById('resultTitle').textContent = result.title;
    document.getElementById('resultDescription').innerHTML = result.description;

    // Psychology block
    document.getElementById('psychologyTitle').textContent = result.psychologyTitle;
    document.getElementById('psychologyText').innerHTML = result.psychologyText;

    // Voice CTA block
    document.getElementById('voiceCtaText').innerHTML = result.voiceCta;

    // Show toys with images
    const toysContainer = document.getElementById('resultToys');
    toysContainer.innerHTML = result.toys.map(toy =>
      `<a href="${toy.url}" target="_blank" class="toy-card">
        <img src="${toy.image}" alt="${toy.name}" class="toy-image" loading="lazy">
        <span class="toy-name">${toy.name}</span>
      </a>`
    ).join('');

    // Show result
    document.getElementById('resultContainer').classList.add('active');

    // Update progress to 100%
    document.getElementById('progressFill').style.width = '100%';
  }

  // Restart quiz
  function restartQuiz() {
    // Reset state
    currentQuestion = 1;
    scores.gentle = 0;
    scores.loyal = 0;
    scores.explorer = 0;
    scores.dreamer = 0;

    // Reset UI
    document.getElementById('resultContainer').classList.remove('active');
    document.getElementById('questionContainer').style.display = 'block';
    document.querySelector('.progress-container').style.display = 'block';

    showQuestion(1);
  }

  // Go to start screen
  function goToStart() {
    // Reset state
    currentQuestion = 1;
    scores.gentle = 0;
    scores.loyal = 0;
    scores.explorer = 0;
    scores.dreamer = 0;

    // Hide quiz area and result
    document.getElementById('quizArea').classList.remove('active');
    document.getElementById('resultContainer').classList.remove('active');
    document.getElementById('questionContainer').style.display = 'block';
    document.querySelector('.progress-container').style.display = 'block';

    // Show start screen
    document.getElementById('startScreen').classList.remove('hidden');

    // Scroll to top
    window.scrollTo(0, 0);
  }
</script>

</body>
</html>
